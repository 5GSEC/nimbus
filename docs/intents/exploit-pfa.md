## Objective

- The `exploit-pfa` (Prevent Exploitation of Public-Facing Applications) intent is focused on securing applications that are exposed to the internet. This intent aims to mitigate risks associated with malicious actors potentially exploiting vulnerabilities in public-facing applications, such as web servers, to execute harmful actions.

- The main goal of the exploit-pfa intent is to prevent the execution of unauthorized or harmful binaries that could be uploaded to or executed from temporary or log directories. This is particularly relevant for applications like nginx, which may handle external requests and could be targets for exploitation.

**Note** : For the exploit-pfa intent one needs to have  [nimbus-kubearmor](../../deployments/nimbus-kubearmor/Readme.md) adapter running in their cluster. To install the complete suite with all the adapters pls follow the steps mentioned [here](../getting-started.md#nimbus)

## Policy Creation

The exploit-pfa intent results in `KubeArmorPolicy`. Below is the behaviour of intent in terms of policy: 

### KubeArmorPolicy

#### Prereq

- For the `KubeArmorPolicy` to work, one should have a [BPF-LSM](https://github.com/kubearmor/KubeArmor/blob/main/getting-started/FAQ.md#checking-and-enabling-support-for-bpf-lsm) enabled for each node in their cluster.

#### Policy Description

- The KubeArmorPolicy created here implements strict controls on where executables can be run within the containerized environment

- The policy is set to Block, any attempts to execute binaries from specified directories will be denied.

- Process Matching:

    - `/var/tmp/`
    - `/tmp/`
    - `/var/log/`
    - `/app/logs/`
    - `/logs/`
    - `/etc/`

- All these directories are marked as recursive, meaning that the policy applies to all files and subdirectories within them. This comprehensive approach helps ensure that any harmful binaries, regardless of their specific location, cannot be executed.

- By blocking execution from these critical directories, the policy significantly reduces the attack surface for the application. This prevents attackers from executing potentially malicious scripts or binaries that could lead to data breaches or further compromises.

- This policy serves as an additional layer of defense, particularly important for applications exposed to the internet, which are more vulnerable to exploitation.